generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model StackItem {
  id          String   @id @default(cuid())
  name        String   @unique
  description String?
  imageSrc    String?  @map("image_src")
  createAt    DateTime @default(now()) @map("create_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  portfolioItem PortfolioItem[]

  @@map("stack_items")
}

model PortfolioItem {
  id          String   @id @default(cuid())
  title       String
  description String?
  siteLink    String?  @map("site_link")
  githubLink  String?  @map("github_link")
  createAt    DateTime @default(now()) @map("create_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  stack   StackItem? @relation(fields: [stackId], references: [id])
  stackId String?    @map("stack_id")

  @@map("portfolio_items")
}

model Service {
  id               String            @id @default(cuid())
  title            String            @map("title")
  description      String            @map("description")
  minSum           Int               @map("min_sum")
  maxSum           Int               @map("max_sum")
  createAt         DateTime          @default(now()) @map("create_at")
  updatedAt        DateTime          @updatedAt @map("updated_at")
  descriptionItems DescriptionItem[]
  categories       Category[]

  @@map("services")
}

model DescriptionItem {
  id          String @id @default(cuid())
  description String @map("description")

  createAt  DateTime @default(now()) @map("create_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  service   Service @relation(fields: [serviceId], references: [id])
  serviceId String  @map("service_id")

  @@map("description_items")
}

model Category {
  id           String       @id @default(cuid())
  categoryName String       @map("category_name")
  categoryType CategoryType @default(DEFAULT)
  createAt     DateTime     @default(now()) @map("create_at")
  updatedAt    DateTime     @updatedAt @map("updated_at")

  service   Service @relation(fields: [serviceId], references: [id])
  serviceId String  @map("service_id")

  @@map("categories")
}

enum CategoryType {
  DANGER
  DEFAULT
}

model Review {
  id         String       @id @default(cuid())
  firstName  String       @map("first_name")
  lastName   String       @map("last_name")
  textReview String       @map("text_review")
  status     ReviewStatus @default(UNVERIFIED) @map("status")
  createAt   DateTime     @default(now()) @map("create_at")
  updatedAt  DateTime     @updatedAt @map("updated_at")

  @@map("reviews")
}

enum ReviewStatus {
  VERIFIED   @map("Подтвержденно")
  UNVERIFIED @map("Отклонен")
}

model Message {
  id        String   @id @default(cuid())
  firstName String   @default("Имя пользователя") @map("first_name")
  lastName  String   @default("Фамилия пользователя") @map("last_name")
  email     String   @default("Не указана") @map("email")
  phone     String   @default("Не указан") @map("phone")
  comment   String   @default("Комментарий не указан") @map("comment")
  createAt  DateTime @default(now()) @map("create_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("messages")
}
